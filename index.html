<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jordens inre krafter ‚Äì h√§ndelsef√∂rlopp</title>
  <style>
    body {font-family: system-ui, sans-serif; background:#fafafa; color:#1f2937; margin:40px; line-height:1.6;}
    .step {background:#fff; padding:20px; border-radius:12px; margin-bottom:20px; box-shadow:0 0 10px rgba(0,0,0,0.08);} 
    textarea {width:100%; height:140px; margin-top:10px; padding:12px; border-radius:8px; border:1px solid #ccc;}
    .sofar {background:#f1f5f9; padding:10px; border-radius:8px; white-space:pre-wrap;}
    .terms {display:flex; flex-wrap:wrap; gap:8px;}
    .chip {background:#eaf2ff; border:1px dashed #b6ccff; color:#0b3a8a; padding:4px 8px; border-radius:999px;}
    #preview {background:#0b1020; color:#eef2ff; padding:16px; border-radius:12px; min-height:200px; white-space:pre-wrap;}
    button {margin-top:10px; margin-right:8px; background:#0f172a; color:#fff; border:none; padding:10px 14px; border-radius:8px; cursor:pointer;}
    button:hover {filter:brightness(1.1);}
  </style>
</head>
<body>
  <h1>Beskriv ett <em>h√§ndelsef√∂rlopp</em> om jordens inre krafter</h1>
  <p>Du ska stegvis beskriva hur jordens inre krafter fungerar och p√•verkar jordytan. Anv√§nd begreppen i varje steg. Texten sparas automatiskt i webbl√§saren.</p>

  <div class="terms">
    <span class="chip">Mantel</span>
    <span class="chip">K√§rna</span>
    <span class="chip">Jordskorpan</span>
    <span class="chip">Konvektionsstr√∂mmar</span>
    <span class="chip">Kontinentaldrift</span>
    <span class="chip">Pangea</span>
    <span class="chip">Plattor</span>
    <span class="chip">Nagel</span>
    <span class="chip">Magma</span>
  </div>

  <div class="step" id="step1">
    <h2>1) Jordens lager och uppbyggnad</h2>
    <p>Anv√§nd begreppen <strong>K√§rna</strong>, <strong>Mantel</strong> och <strong>Jordskorpan</strong>. Beskriv vad som skiljer lagren √•t, hur de h√§nger ihop och hur v√§rmen fr√•n k√§rnan p√•verkar de andra lagren. T√§nk p√• att anv√§nda sambandsord som ‚Äúeftersom‚Äù och ‚Äúd√§rf√∂r att‚Äù.</p>
    <textarea id="input1" placeholder="Skriv steg 1 h√§r‚Ä¶"></textarea>
  </div>

  <div class="step" id="step2">
    <h2>2) R√∂relser i manteln</h2>
    <div class="sofar" id="sofar2">(Texten fr√•n steg 1 visas h√§r)</div>
    <p>Anv√§nd begreppen <strong>Konvektionsstr√∂mmar</strong>, <strong>Plattor</strong> och <strong>Nagel</strong>. F√∂rklara vad konvektionsstr√∂mmar √§r, hur de p√•verkar plattorna och hur l√•ngsamt plattorna r√∂r sig. J√§mf√∂r g√§rna hastigheten med hur snabbt en <strong>nagel</strong> v√§xer. Skriv med egna ord s√• att n√•gon annan kan f√∂rst√•.</p>
    <textarea id="input2" placeholder="Skriv steg 2 h√§r‚Ä¶"></textarea>
  </div>

  <div class="step" id="step3">
    <h2>3) Kontinenternas r√∂relser och jordens utveckling</h2>
    <div class="sofar" id="sofar3">(Texten fr√•n steg 1‚Äì2 visas h√§r)</div>
    <p>Anv√§nd begreppen <strong>Kontinentaldrift</strong>, <strong>Pangea</strong> och <strong>Magma</strong>. F√∂rklara hur kontinenterna har r√∂rt sig genom historien och hur plattornas r√∂relser kan orsaka vulkaner och bergskedjor. Visa orsak och f√∂ljd i ditt resonemang ‚Äì vad h√§nder f√∂rst, och vad leder det till?</p>
    <textarea id="input3" placeholder="Skriv steg 3 h√§r‚Ä¶"></textarea>
  </div>

  <div class="step" id="step4">
    <h2>4) Slutlig sammanfattning ‚Äì finputsa din text</h2>
    <div class="sofar" id="sofar4">(Texten fr√•n steg 1‚Äì3 visas h√§r)</div>
    <p>L√§s igenom allt du har skrivit. Kontrollera att du har anv√§nt alla begrepp korrekt och att texten h√§nger ihop logiskt. F√∂rtydliga samband (t.ex. ‚ÄúN√§r detta h√§nder‚Ä¶ leder det till att‚Ä¶‚Äù). Se till att du har skrivit i hela meningar och att texten f√∂rklarar b√•de hur och varf√∂r saker h√§nder.</p>
    <textarea id="input4" placeholder="Skriv din slutliga version h√§r‚Ä¶"></textarea>
  </div>

  <div id="summary" class="step">
    <h2>Sluttext ‚Äì Jordens inre krafter</h2>
    <div id="preview">B√∂rja skriva i steg 1‚Ä¶</div>
    <p><strong>Totalt antal ord:</strong> <span id="wordCount">0</span></p>
    <button onclick="saveProgress()">üíæ Spara</button>
    <button onclick="copyStory()">üìã Kopiera</button>
    <button onclick="exportText()">‚¨áÔ∏è Ladda ned .txt</button>
    <button onclick="clearProgress()">üóëÔ∏è Rensa</button>
  </div>

  <script>
    const fields = [1,2,3,4].map(i=>document.getElementById('input'+i));
    const sofarBoxes = {2:sofar2,3:sofar3,4:sofar4};
    const preview = document.getElementById('preview');
    const wordCountEl = document.getElementById('wordCount');
    const KEY = i => `geo4_input${i}`;

    window.addEventListener('DOMContentLoaded',()=>{for(let i=1;i<=4;i++){const s=localStorage.getItem(KEY(i));if(s)fields[i-1].value=s;}updateAll();});
    fields.forEach((el,idx)=>el.addEventListener('input',()=>{localStorage.setItem(KEY(idx+1),el.value);updateAll();}));

    function buildStory(upto){const end=upto||4;return fields.slice(0,end).map(e=>e.value.trim()).filter(Boolean).join('\n\n');}
    function renderSofar(){for(let s=2;s<=4;s++){if(sofarBoxes[s])sofarBoxes[s].textContent=buildStory(s-1)||'(Inget skrivet √§nnu.)';}}
    function renderPreview(){const t=buildStory();preview.textContent=t||'B√∂rja skriva i steg 1‚Ä¶';}
    function countWords(t){const m=t.match(/\b[\w‚Äô'\-√•√§√∂√Ö√Ñ√ñ]+\b/g);return m?m.length:0;}
    function renderWordCount(){wordCountEl.textContent=countWords(buildStory());}
    function updateAll(){renderSofar();renderPreview();renderWordCount();}

    function saveProgress(){fields.forEach((el,i)=>localStorage.setItem(KEY(i+1),el.value));alert('Sparat i webbl√§saren.');}
    function clearProgress(){if(!confirm('Radera allt sparat arbete?'))return;fields.forEach((el,i)=>{localStorage.removeItem(KEY(i+1));el.value='';});updateAll();}
    async function copyStory(){const t=buildStory();await navigator.clipboard.writeText(t);alert('Text kopierad.');}
    function exportText(){const t=buildStory();const b=new Blob([t],{type:'text/plain'});const a=document.createElement('a');a.href=URL.createObjectURL(b);a.download='jordens_inre_krafter.txt';a.click();URL.revokeObjectURL(a.href);}
  </script>
</body>
</html>
